<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Help & Support â€” MindSpend</title>
  
  <!-- Google Sora Font -->
  <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Supabase Library -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2" defer></script>
  
  <!-- Authentication & Navigation -->
  <script src="utils/storage.js"></script>
  <script src="utils/supabase.js" defer></script>
  <script src="utils/auth.js" defer></script>
  <script src="utils/navigation.js" defer></script>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Sora', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      min-height: 100vh;
      color: #2d3436;
      background: linear-gradient(135deg, #ffffff 0%, #f9f8f6 100%);
      line-height: 1.6;
      scroll-behavior: smooth;
      overflow-x: hidden;
    }

    /* Animated background pattern */
    @keyframes bg-scrolling-reverse {
      100% { background-position: 50px 50px; }
    }

    .bg-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAABnSURBVHja7M5RDYAwDEXRDgmvEocnlrQS2SwUFST9uEfBGWs9c97nbGtDcquqiKhOImLs/UpuzVzWEi1atGjRokWLFi1atGjRokWLFi1atGjRokWLFi1af7Ukz8xWp8z8AAAA//8DAJ4LoEAAlL1nAAAAAElFTkSuQmCC") repeat 0 0;
      animation: bg-scrolling-reverse 0.92s infinite linear;
    }

    .content-wrapper {
      position: relative;
      z-index: 1;
      min-height: 100vh;
      padding: 60px 20px 40px 20px;
    }

    .help-container {
      max-width: 900px;
      margin: 0 auto;
    }

    /* Header Section */
    .help-header {
      text-align: center;
      margin-bottom: 50px;
      padding: 40px 30px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 4px 24px rgba(107, 144, 128, 0.08);
      border: 1px solid rgba(107, 144, 128, 0.1);
    }

    .help-header h1 {
      font-size: 2.8rem;
      font-weight: 700;
      color: #6b9080;
      margin-bottom: 10px;
      letter-spacing: -0.03em;
    }

    .help-header p {
      font-size: 1.1rem;
      color: #636e72;
      font-weight: 500;
    }

    /* Section Styling */
    .help-section {
      background: white;
      border-radius: 16px;
      padding: 40px 35px;
      margin-bottom: 30px;
      box-shadow: 0 2px 12px rgba(107, 144, 128, 0.08);
      border: 1px solid rgba(107, 144, 128, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .help-section:hover {
      box-shadow: 0 8px 24px rgba(107, 144, 128, 0.12);
      transform: translateY(-2px);
    }

    .help-section h2 {
      font-size: 1.8rem;
      font-weight: 700;
      color: #6b9080;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .help-section h2 svg {
      width: 32px;
      height: 32px;
      flex-shrink: 0;
    }

    .help-section h3 {
      font-size: 1.3rem;
      font-weight: 600;
      color: #4d7464;
      margin: 25px 0 15px 0;
    }

    .help-section p {
      font-size: 1rem;
      color: #636e72;
      line-height: 1.7;
      margin-bottom: 15px;
    }

    /* Contact Section Styling */
    .contact-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 25px;
    }

    .contact-card {
      background: linear-gradient(135deg, rgba(107, 144, 128, 0.08) 0%, rgba(164, 195, 178, 0.08) 100%);
      border: 2px solid rgba(107, 144, 128, 0.2);
      border-radius: 12px;
      padding: 25px;
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .contact-card:hover {
      border-color: #6b9080;
      box-shadow: 0 6px 16px rgba(107, 144, 128, 0.15);
      transform: translateY(-4px);
      background: linear-gradient(135deg, rgba(107, 144, 128, 0.12) 0%, rgba(164, 195, 178, 0.12) 100%);
    }

    .contact-card svg {
      width: 48px;
      height: 48px;
      margin-bottom: 15px;
      color: #6b9080;
    }

    .contact-card h4 {
      font-size: 1rem;
      font-weight: 600;
      color: #2d3436;
      margin-bottom: 12px;
    }

    .contact-card a {
      display: inline-block;
      font-size: 1.05rem;
      font-weight: 600;
      color: #6b9080;
      text-decoration: none;
      border-bottom: 2px solid transparent;
      transition: all 0.3s ease;
      word-break: break-all;
    }

    .contact-card a:hover {
      border-bottom-color: #6b9080;
      color: #5a7d6f;
    }

    /* FAQ Section */
    .faq-item {
      background: rgba(107, 144, 128, 0.05);
      border-left: 4px solid #6b9080;
      padding: 20px;
      margin-bottom: 15px;
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .faq-item:hover {
      background: rgba(107, 144, 128, 0.08);
      border-left-color: #a4c3b2;
    }

    .faq-item strong {
      color: #2d3436;
      font-size: 1.05rem;
      display: block;
      margin-bottom: 10px;
    }

    .faq-item p {
      color: #636e72;
      margin: 0;
    }

    /* Feature List */
    .feature-list {
      list-style: none;
      margin-top: 20px;
    }

    .feature-list li {
      display: flex;
      align-items: flex-start;
      gap: 15px;
      margin-bottom: 15px;
      padding: 15px;
      background: rgba(164, 195, 178, 0.08);
      border-radius: 8px;
      transition: all 0.3s ease;
    }

    .feature-list li:hover {
      background: rgba(164, 195, 178, 0.12);
      transform: translateX(5px);
    }

    .feature-list li svg {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
      color: #6b9080;
      margin-top: 2px;
    }

    .feature-list li span {
      color: #636e72;
      font-size: 1rem;
      line-height: 1.5;
    }

    /* Buttons */
    .help-btn {
      display: inline-block;
      padding: 12px 28px;
      background: #6b9080;
      color: white;
      text-decoration: none;
      border-radius: 10px;
      font-weight: 600;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      font-family: 'Sora', sans-serif;
      font-size: 1rem;
      margin-top: 20px;
    }

    .help-btn:hover {
      background: #5a7d6f;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(107, 144, 128, 0.3);
    }

    .help-btn-secondary {
      background: #a4c3b2;
    }

    .help-btn-secondary:hover {
      background: #8fb0a0;
    }

    /* Footer CTA */
    .help-cta {
      background: linear-gradient(135deg, #6b9080 0%, #5a7d6f 100%);
      border-radius: 16px;
      padding: 50px 40px;
      text-align: center;
      color: white;
      margin-top: 50px;
      box-shadow: 0 8px 24px rgba(107, 144, 128, 0.2);
    }

    .help-cta h2 {
      color: white;
      font-size: 2rem;
      margin-bottom: 15px;
      display: flex;
      justify-content: center;
      gap: 12px;
      align-items: center;
    }

    .help-cta h2 svg {
      width: 36px;
      height: 36px;
    }

    .help-cta p {
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.1rem;
      margin-bottom: 25px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }

    .help-cta a {
      display: inline-block;
      background: white;
      color: #6b9080;
      padding: 12px 32px;
      border-radius: 10px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      font-size: 1rem;
    }

    .help-cta a:hover {
      background: #f5f3f0;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .help-header {
        padding: 30px 20px;
      }

      .help-header h1 {
        font-size: 2rem;
      }

      .help-section {
        padding: 25px 20px;
      }

      .contact-grid {
        grid-template-columns: 1fr;
      }

      .content-wrapper {
        padding: 60px 15px 30px 15px;
      }

      .help-cta {
        padding: 35px 25px;
        margin-top: 40px;
      }

      .help-cta h2 {
        font-size: 1.5rem;
      }
    }

    /* Animations */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .help-section {
      animation: fadeInUp 0.6s ease-out backwards;
    }

    .help-section:nth-child(1) { animation-delay: 0.1s; }
    .help-section:nth-child(2) { animation-delay: 0.2s; }
    .help-section:nth-child(3) { animation-delay: 0.3s; }
  </style>
</head>
<body>
  <div class="bg-container"></div>
  
  <div class="content-wrapper">
    <div class="help-container">
      <!-- Header -->
      <div class="help-header">
        <h1>Help & Support</h1>
        <p>We're here to help you get the most out of MindSpend</p>
      </div>

      <!-- Getting Started Section -->
      <div class="help-section">
        <h2>
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15h4v2h-4zm0-4h4v4h-4zm0-4h4v4h-4z" fill="currentColor"/>
          </svg>
          Getting Started
        </h2>
        <p>Welcome to MindSpend Labs! Here are the first steps to understand your financial behavior:</p>
        
        <ul class="feature-list">
          <li>
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="currentColor"/>
            </svg>
            <span><strong>Upload Your Statement:</strong> Start by uploading your CSV or OFX bank statement from the home page. This helps us analyze your spending patterns.</span>
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="currentColor"/>
            </svg>
            <span><strong>View Analytics:</strong> Navigate to the Analytics section to see detailed charts and visualizations of your spending behavior.</span>
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="currentColor"/>
            </svg>
            <span><strong>Get Insights:</strong> Read personalized insights in the Insights section to understand your behavioral finance patterns.</span>
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z" fill="currentColor"/>
            </svg>
            <span><strong>Manage Your Account:</strong> Update your profile and settings from the user menu in the top right corner.</span>
          </li>
        </ul>
      </div>

      <!-- Features Section -->
      <div class="help-section">
        <h2>
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" fill="currentColor"/>
          </svg>
          Key Features
        </h2>
        <p>MindSpend Labs helps you understand your financial behavior with these powerful tools:</p>
        
        <ul class="feature-list">
          <li>
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z" fill="currentColor"/>
            </svg>
            <span><strong>Interactive Charts:</strong> Visualize spending over time, by category, and by time of day</span>
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" fill="currentColor"/>
            </svg>
            <span><strong>Behavioral Insights:</strong> Get AI-powered analysis of your spending patterns and habits</span>
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 8H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 4h-8v2h8v-2z" fill="currentColor"/>
            </svg>
            <span><strong>Finance Dashboard:</strong> Get a comprehensive overview of your financial health</span>
          </li>
          <li>
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1zm0 20c-4.97 0-9-4.03-9-9s4.03-9 9-9 9 4.03 9 9-4.03 9-9 9zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 9 15.5 9 14 9.67 14 10.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 9 8.5 9 7 9.67 7 10.5 7.67 12 8.5 12zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z" fill="currentColor"/>
            </svg>
            <span><strong>Personalization:</strong> All insights are tailored to your unique spending behavior</span>
          </li>
        </ul>
      </div>

      <!-- Contact Section -->
      <div class="help-section">
        <h2>
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" fill="currentColor"/>
          </svg>
          Get in Touch
        </h2>
        <p>Have questions or need assistance? We're here to help! Reach out to us at any of the following email addresses:</p>
        
        <div class="contact-grid">
          <div class="contact-card">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" fill="currentColor"/>
            </svg>
            <h4>Primary Contact</h4>
            <a href="mailto:ronitsharma1449@gmail.com">ronitsharma1449@gmail.com</a>
          </div>
          
          <div class="contact-card">
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" fill="currentColor"/>
            </svg>
            <h4>Alternative Contact</h4>
            <a href="mailto:geminiproronit@gmail.com">geminiproronit@gmail.com</a>
          </div>
        </div>
      </div>

      <!-- FAQ Section -->
      <div class="help-section">
        <h2>
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z" fill="currentColor"/>
          </svg>
          Frequently Asked Questions
        </h2>

        <div class="faq-item">
          <strong>Q: What file formats do you accept?</strong>
          <p>A: We currently support CSV and OFX file formats from your bank statements. Make sure your file is properly formatted with transaction data.</p>
        </div>

        <div class="faq-item">
          <strong>Q: Is my financial data secure?</strong>
          <p>A: Yes, your data is encrypted and stored securely. We use industry-standard security practices to protect your personal financial information.</p>
        </div>

        <div class="faq-item">
          <strong>Q: How often should I upload new statements?</strong>
          <p>A: You can upload statements as frequently as you'd like. Monthly uploads are recommended for regular behavioral analysis.</p>
        </div>

        <div class="faq-item">
          <strong>Q: Can I download my analysis?</strong>
          <p>A: Yes! You can export your analysis data as JSON from the home page for your records or further analysis.</p>
        </div>

        <div class="faq-item">
          <strong>Q: What categories does the analyzer recognize?</strong>
          <p>A: Our AI categorizes transactions into common spending categories like groceries, transportation, entertainment, and more based on transaction descriptions.</p>
        </div>

        <div class="faq-item">
          <strong>Q: How can I update my profile information?</strong>
          <p>A: Click on your name in the top right corner and select "Profile" to update your personal information and preferences.</p>
        </div>
      </div>

      <!-- CTA Section -->
      <div class="help-cta">
        <h2>
          <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 1C5.9 1 1 5.9 1 12s4.9 11 11 11 11-4.9 11-11S18.1 1 12 1zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z" fill="currentColor"/>
          </svg>
          Ready to Get Started?
        </h2>
        <p>Upload your first bank statement and discover your financial behavior patterns today!</p>
        <a href="index.html" class="help-btn">Go to Home Page</a>
      </div>
    </div>
  </div>

  <script>
    // Initialize Navigation with comprehensive logging
    async function initNavigation() {
      console.log('========== HELP PAGE NAV INIT START ==========');
      console.log('Page ready state:', document.readyState);
      console.log('Current time:', new Date().toISOString());
      
      // Wait for both Navigation and AuthManager to be available
      let navReady = typeof Navigation !== 'undefined';
      let authReady = typeof AuthManager !== 'undefined';
      console.log('Initial state - Navigation:', navReady, 'AuthManager:', authReady);
      
      let attempts = 0;
      while ((typeof Navigation === 'undefined' || typeof AuthManager === 'undefined') && attempts < 150) {
        await new Promise(resolve => setTimeout(resolve, 50));
        attempts++;
      }
      
      console.log(`After waiting: attempts=${attempts}`);
      console.log(`Final state - Navigation=${typeof Navigation}, AuthManager=${typeof AuthManager}`);
      
      if (typeof Navigation !== 'undefined' && typeof AuthManager !== 'undefined') {
        try {
          console.log('ðŸ“ Calling Navigation.init()...');
          
          // Call init directly
          const initResult = await Navigation.init();
          console.log('âœ… Navigation.init() completed successfully');
          console.log('Navigation.user:', Navigation.user);
          console.log('Navigation.displayName:', Navigation.displayName);
          console.log('Navigation.isAuthenticated():', Navigation.isAuthenticated());
          
          // Check if nav was injected
          setTimeout(() => {
            const navElement = document.querySelector('.main-nav');
            const signInBtn = document.querySelector('.nav-sign-in');
            const userMenu = document.querySelector('.nav-user-btn');
            console.log('Nav injected:', !!navElement);
            console.log('Sign In button present:', !!signInBtn);
            console.log('User menu present:', !!userMenu);
          }, 500);
          
        } catch (e) {
          console.error('âŒ Error in Navigation.init():', e);
          console.error('Stack:', e.stack);
        }
      } else {
        console.error('âš ï¸ Dependencies missing after wait');
        console.error('Navigation type:', typeof Navigation);
        console.error('AuthManager type:', typeof AuthManager);
        console.error('Scripts loaded check:');
        console.log('- storage.js exists:', typeof StorageManager !== 'undefined');
        console.log('- supabase on window:', !!window.supabase);
      }
      console.log('========== HELP PAGE NAV INIT END ==========');
    }
    
    // Use DOMContentLoaded event
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        console.log('ðŸ“„ DOMContentLoaded event fired for help.html');
        initNavigation();
      });
    } else {
      console.log('ðŸ“„ DOM already loaded for help.html');
      // Small delay to ensure scripts are parsed
      setTimeout(initNavigation, 100);
    }
  </script>
</body>
</html>